<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Flask+Vue.js(1)- The First Flask RESTful API | Weird Lab</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css"><script src="/js/third-party/jquery.min.js">           </script><script src="/js/third-party/velocity.min.js">           </script><script src="/js/third-party/velocity.ui.min.js">           </script><link rel="icon" href="/img/robomongo.png"><meta name="generator" content="Hexo 4.2.1"></head><body><nav id="nav-bar"><nav class="clear-fix" id="nav-container"><div class="pull-left" id="page-home"><a href="/">Weird Lab</a></div><i class="fa fa-bars pull-right" id="toggle-nav" aria-hidden="true"></i><ul class="pull-right" id="navs"><li><a class="nav" href="/">Home</a></li><li><a class="nav" href="/tags">Tags</a></li><li><a class="nav" href="/categories">Categories</a></li><li><a class="nav" href="/about">About</a></li></ul></nav></nav><header id="header-info"><div id="header-container"><div id="site-info"><div id="terminal-pl"><div id="top-bar"><ul id="control"><li class="btn"></li><li class="btn"></li><li class="btn"></li></ul><div id="file-path"><i class="fa fa-folder folder-ic" aria-hidden="true"></i> weird lab 10 X 10</div></div><div id="code-pl">weird lab:~/blog$
<span class="code-pl-input">source &quot;Flask+Vue.js(1)- The First Flask RESTful API.sh&quot;</span><br><br>weird lab:~/blog$
<span class="code-pl-input">printenv</span><br><span class="code-pl-output">CREATED_DATE = 2020-05-01</span><br><span class="code-pl-output">TAGS =</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/tags/#vue.js"><span class="code-pl-output">vue.js</span></a><span class="code-pl-output"> </span><span class="code-pl-output">:</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/tags/#flask"><span class="code-pl-output">flask</span></a><span class="code-pl-output"> </span><span class="code-pl-output">:</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/tags/#RESTful"><span class="code-pl-output">RESTful</span></a><span class="code-pl-output"> </span><span class="code-pl-output">:</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/tags/#API"><span class="code-pl-output">API</span></a><span class="code-pl-output"> </span><span class="code-pl-output">:</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/tags/#FullStack"><span class="code-pl-output">FullStack</span></a><span class="code-pl-output"> </span><span class="code-pl-output"></span><br><span class="code-pl-output">CATEGORIES =</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/categories/#Vue.js"><span class="code-pl-output">Vue.js</span></a><span class="code-pl-output"> </span><span class="code-pl-output">:</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/categories/#Flask"><span class="code-pl-output">Flask</span></a><span class="code-pl-output"> </span><span class="code-pl-output"></span><br><br>weird lab:~/blog$
<span class="code-pl-input">grep -lr $TAGS post</span><br><span class="code-pl-output">2020-05-01</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/2020/05/01/flask-vue-js-1/" target="_blank"><span class="code-pl-output">Flask+Vue.js(1)- The First Flask RESTful API</span></a><br><span class="code-pl-output">2020-05-01</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/2020/05/01/flask-vue-js-2/" target="_blank"><span class="code-pl-output">Flask+Vue.js(2)- Vue.js Connect With Flask RESTful API By Axios</span></a><br><span class="code-pl-output">2020-05-08</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/2020/05/08/flask-vue-js-3/" target="_blank"><span class="code-pl-output">Flask+Vue.js(3)- Design User Model APIs</span></a><br><span class="code-pl-output">2020-05-21</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/2020/05/21/flask-vue-js-4/" target="_blank"><span class="code-pl-output">Flask+Vue.js(4)- Vue.js connects with flask APIs</span></a><br><span class="code-pl-output">2020-05-21</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/2020/05/21/flask-vue-js-5/" target="_blank"><span class="code-pl-output">Flask+Vue.js(5)- User Homepage and User Avatar</span></a><br><span class="code-pl-output">2020-05-21</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/2020/05/21/flask-vue-js-6/" target="_blank"><span class="code-pl-output">Flask+Vue.js(6)- Blog CRUD And Markdown</span></a><br><!--if page.next| > .prev
br
a(href=url_for(page.next.path))
  span.answer= page.next.title
br
br--><!--if page.prev| > .next
br
a(href=url_for(page.prev.path))
  span.answer= page.prev.title--></div></div></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><a class="article-title">Flask+Vue.js(1)- The First Flask RESTful API</a><time class="article-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-05-01</time><h1 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h1><p>OS: macOS Mojave<br>Language: python 3.7<br>IDE: VS code</p>
<h1 id="1-Code-management"><a href="#1-Code-management" class="headerlink" title="1. Code management"></a>1. Code management</h1><h2 id="1-1-Install-git"><a href="#1-1-Install-git" class="headerlink" title="1.1 Install git"></a>1.1 Install git</h2><a id="more"></a>
<p>google: how to install git :)</p>
<h2 id="1-2-Create-a-new-repository"><a href="#1-2-Create-a-new-repository" class="headerlink" title="1.2 Create a new repository"></a>1.2 Create a new repository</h2><p>Login Github account, create a new repository, I named it “blog”</p>
<h2 id="1-3-Git-clone"><a href="#1-3-Git-clone" class="headerlink" title="1.3 Git clone"></a>1.3 Git clone</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> project</span><br><span class="line">$ git <span class="built_in">clone</span> git@github.com:guguji123/blog.git</span><br></pre></td></tr></table></figure>
<h2 id="1-4-Init-commit"><a href="#1-4-Init-commit" class="headerlink" title="1.4 Init commit"></a>1.4 Init commit</h2><p>Add MIT License, then commit</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ git status</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        LICENSE</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">"git add"</span> to track)</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">"init"</span></span><br><span class="line">$ git push</span><br></pre></td></tr></table></figure>
<h2 id="1-5-Branch-management"><a href="#1-5-Branch-management" class="headerlink" title="1.5 Branch management"></a>1.5 Branch management</h2><p>Create dev branch:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev</span><br><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br></pre></td></tr></table></figure>
<h1 id="2-Configuration-of-Flask"><a href="#2-Configuration-of-Flask" class="headerlink" title="2. Configuration of Flask"></a>2. Configuration of Flask</h1><ol>
<li>Install Python 3 and pipenv(a tool for version management)</li>
<li>Open ternimal, switch to project directory<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> project/blog</span><br><span class="line">$ mkdir back-end</span><br><span class="line">$ <span class="built_in">cd</span> back-end</span><br><span class="line">$ pipenv install</span><br><span class="line">$ pipenv shell</span><br><span class="line">Loading .env environment variables…</span><br><span class="line">Launching subshell <span class="keyword">in</span> virtual environment…</span><br><span class="line">bash-3.2$  . /Users/******/.<span class="built_in">local</span>/share/virtualenvs/back-end-NlDxPUcQ/bin/activate</span><br><span class="line">(back-end) bash-3.2$ pip install flask</span><br></pre></td></tr></table></figure></li>
<li>Open the project with Visual Studio Code, support the file .gitignore:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.idea/</span><br><span class="line">__pycache__/</span><br><span class="line">app.db</span><br><span class="line">blog.log*</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="2-1-Factory-Method-Pattern"><a href="#2-1-Factory-Method-Pattern" class="headerlink" title="2.1 Factory Method Pattern"></a>2.1 Factory Method Pattern</h2><p>Create app directory, then create <code>app/__init__.py</code>.<br>The application factory function will be used to create the Flask application.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> Config</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_app</span><span class="params">(config_class=Config)</span>:</span></span><br><span class="line">    app = Flask(__name__)</span><br><span class="line">    app.config.from_object(config_class)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># register blueprint</span></span><br><span class="line">    <span class="keyword">from</span> app.api <span class="keyword">import</span> bp <span class="keyword">as</span> api_bp</span><br><span class="line">    app.register_blueprint(api_bp, url_prefix=<span class="string">'/api'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app</span><br></pre></td></tr></table></figure>
<h2 id="2-2-API-blueprint"><a href="#2-2-API-blueprint" class="headerlink" title="2.2 API blueprint"></a>2.2 API blueprint</h2><p>Create the directory <code>app/api</code>, then create <code>api/__init__.py</code>, define blueprint.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line">bp = Blueprint(<span class="string">'api'</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app.api <span class="keyword">import</span> ping</span><br></pre></td></tr></table></figure>
<p>Define the first router function, when client visit /ping, return the Pong! in the form of JSON, create <code>api/ping.py</code>:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> jsonify</span><br><span class="line"><span class="keyword">from</span> app.api <span class="keyword">import</span> bp</span><br><span class="line"></span><br><span class="line"><span class="meta">@bp.route('/ping', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ping</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''front-end will test the connection with back-end's Flask API'''</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(<span class="string">'Pong!'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-3-Luanch-file"><a href="#2-3-Luanch-file" class="headerlink" title="2.3 Luanch file"></a>2.3 Luanch file</h2><p>Create <code>back-end/blog.py</code>：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> create_app</span><br><span class="line"></span><br><span class="line">app = create_app()</span><br></pre></td></tr></table></figure>
<h2 id="2-4-Configuration-file"><a href="#2-4-Configuration-file" class="headerlink" title="2.4 Configuration file."></a>2.4 Configuration file.</h2><p>Create <code>back-end/config.py</code>:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line">basedir = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line">load_dotenv(os.path.join(basedir, <span class="string">'.env'</span>), encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Config</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>Create <code>back-end/.env</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FLASK_APP &#x3D; blog.py</span><br><span class="line">FLASK_DEBUG &#x3D; 1</span><br></pre></td></tr></table></figure>
<p>The project structure:<br>|– back-end<br>        |– app<br>            |– api<br>                |–<strong>init</strong>.py<br>                |–ping.py<br>            |– <strong>init</strong>.py<br>        |– .gitignore<br>        |– .env<br>        |– blog.py<br>        |– config.py<br>        |– Pipfile<br>        |– Pipfile.lock</p>
<h2 id="2-5-Strat-the-application"><a href="#2-5-Strat-the-application" class="headerlink" title="2.5 Strat the application"></a>2.5 Strat the application</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(back-end) bash-3.2$ flask run</span><br><span class="line"> * Serving Flask app <span class="string">"blog.py"</span> (lazy loading)</span><br><span class="line"> * Environment: production</span><br><span class="line">   WARNING: This is a development server. Do not use it <span class="keyword">in</span> a production deployment.</span><br><span class="line">   Use a production WSGI server instead.</span><br><span class="line"> * Debug mode: on</span><br><span class="line"> * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)</span><br><span class="line"> * Restarting with <span class="built_in">stat</span></span><br><span class="line"> * Debugger is active!</span><br><span class="line"> * Debugger PIN: 227-337-736</span><br></pre></td></tr></table></figure>
<p>Open browser, visit <a href="http://127.0.0.1:5000/api/ping" target="_blank" rel="noopener">http://127.0.0.1:5000/api/ping</a><br><img src="/2020/05/01/flask-vue-js-1/ping_pong.jpeg" alt="ping-pong"><br>It means the testing router <code>Ping-Pong</code> that we defined works well!</p>
<h1 id="Commit-Code"><a href="#Commit-Code" class="headerlink" title="Commit Code"></a>Commit Code</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">"1.Flask RESTful API testing Ping-Pong"</span></span><br><span class="line">$ git checkout master</span><br><span class="line">$ git merge dev</span><br><span class="line">$ git branch -d dev</span><br><span class="line">$ giy branch</span><br></pre></td></tr></table></figure>
<p>Push the local <code>master</code> branch to the <code>master</code> branch in Github repository:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push</span><br><span class="line">or</span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>
<p>Make a <code>tag</code> then upload:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v0.1</span><br><span class="line">$ git tag</span><br><span class="line">v0.1</span><br><span class="line"><span class="variable">$git</span> show v0.1</span><br><span class="line"></span><br><span class="line">1. push a single tag</span><br><span class="line">$ git push origin v0.1</span><br><span class="line"></span><br><span class="line">2. push all tags</span><br><span class="line">$ git push --tags</span><br><span class="line">or</span><br><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure>
<p>The code has been uploaded to <a href="https://github.com/guguji123/blog/releases/tag/v0.1" target="_blank" rel="noopener">https://github.com/guguji123/blog/releases/tag/v0.1</a></p>
</article><article id="post"><script type="text/javascript" src="https://utteranc.es/client.js" repo="guguji123/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></article><nav id="pagination"><div class="pagination clear-fix"><div class="page-prev pull-left"><a href="/2020/05/01/flask-vue-js-2/"><i class="fa fa-chevron-left"> </i><span>Flask+Vue.js(2)- Vue.js Connect With Flask RESTful API By Axios</span></a></div></div></nav></div></div><footer><div id="footer-inner"><div class="social-icons"></div><p class="design-info">Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://github.com/lazysheep666/terminal_theme" target="_blank">Teminal</a> (<a href="https://github.com/Tonny-Gu/terminal_theme" target="_blank">NekoDaemon Remix</a>)</p><p class="design-info"> 
 Copyright © 2020 weird lab</p></div></footer><script src="/js/nav.js"></script><script src="/js/scroll.js"></script><script src="/js/index.js"></script></body></html>