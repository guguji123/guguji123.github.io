<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Testing package | Weird Lab</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css"><script src="/js/third-party/jquery.min.js">           </script><script src="/js/third-party/velocity.min.js">           </script><script src="/js/third-party/velocity.ui.min.js">           </script><link rel="icon" href="/img/robomongo.png"><meta name="generator" content="Hexo 4.2.1"></head><body><nav id="nav-bar"><nav class="clear-fix" id="nav-container"><div class="pull-left" id="page-home"><a href="/">Weird Lab</a></div><i class="fa fa-bars pull-right" id="toggle-nav" aria-hidden="true"></i><ul class="pull-right" id="navs"><li><a class="nav" href="/">Home</a></li><li><a class="nav" href="/tags">Tags</a></li><li><a class="nav" href="/categories">Categories</a></li><li><a class="nav" href="/about">About</a></li></ul></nav></nav><header id="header-info"><div id="header-container"><div id="site-info"><div id="terminal-pl"><div id="top-bar"><ul id="control"><li class="btn"></li><li class="btn"></li><li class="btn"></li></ul><div id="file-path"><i class="fa fa-folder folder-ic" aria-hidden="true"></i> weird lab 10 X 10</div></div><div id="code-pl">weird lab:~/blog$
<span class="code-pl-input">source &quot;Testing package.sh&quot;</span><br><br>weird lab:~/blog$
<span class="code-pl-input">printenv</span><br><span class="code-pl-output">CREATED_DATE = 2020-07-15</span><br><span class="code-pl-output">TAGS =</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/tags/#testing"><span class="code-pl-output">testing</span></a><span class="code-pl-output"> </span><span class="code-pl-output"></span><br><span class="code-pl-output">CATEGORIES =</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/categories/#go"><span class="code-pl-output">go</span></a><span class="code-pl-output"> </span><span class="code-pl-output"></span><br><br>weird lab:~/blog$
<span class="code-pl-input">grep -lr $TAGS post</span><br><span class="code-pl-output">2020-07-15</span><span class="code-pl-output"> </span><a class="code-pl-output-url" href="/2020/07/15/testing-package/" target="_blank"><span class="code-pl-output">Testing package</span></a><br><!--if page.next| > .prev
br
a(href=url_for(page.next.path))
  span.answer= page.next.title
br
br--><!--if page.prev| > .next
br
a(href=url_for(page.prev.path))
  span.answer= page.prev.title--></div></div></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><a class="article-title">Testing package</a><time class="article-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-15</time><h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>Package testing provides support for automated testing of Go packages. It is intended to be used in concert with the “go test” command, which automates execution of any function of the form</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestXxx</span><span class="params">(*testing.T)</span></span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>where Xxx does not start with a lowercase letter. The function name serves to identify<br>the test routine.</p>
<p>Within these functions, use the Error, Fail or related methods to signal failure.</p>
<p>Here we have a function in file “cal.go” that we want to test.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addUpper</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	res := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">		res += i</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>To write a new test suite, create a file whose name ends _test.go that contains the TestXxx functions as described here.<br><img src="/2020/07/15/testing-package/testing.jpeg" alt="testing"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAddUpper</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	res := addUpper(<span class="number">10</span>)</span><br><span class="line">	<span class="keyword">if</span> res != <span class="number">55</span> &#123;</span><br><span class="line">		t.Fatalf(<span class="string">"AddUpper(10)error，expected=%v actual=%v\n"</span>, <span class="number">55</span>, res)</span><br><span class="line">	&#125;</span><br><span class="line">	t.Logf(<span class="string">"AddUpper(10) perform successfully..."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then run “go test -v” in terminal.<br><img src="/2020/07/15/testing-package/run_test.jpeg" alt="run_test"><br>If we change the argument 10 to 11.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res := addUpper(<span class="number">11</span>)</span><br></pre></td></tr></table></figure>
<p>Then the results:<br><img src="/2020/07/15/testing-package/run_test1.jpeg" alt="run_test"></p>
</article><article id="post"><script type="text/javascript" src="https://utteranc.es/client.js" repo="guguji123/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></article><nav id="pagination"><div class="pagination clear-fix"><div class="page-next pull-right"><a href="/2020/07/13/struct-and-memory-allocation/"><span>Struct and its memory allocation</span><i class="fa fa-chevron-right"></i></a></div></div></nav></div></div><footer><div id="footer-inner"><div class="social-icons"></div><p class="design-info">Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://github.com/lazysheep666/terminal_theme" target="_blank">Teminal</a> (<a href="https://github.com/Tonny-Gu/terminal_theme" target="_blank">NekoDaemon Remix</a>)</p><p class="design-info"> 
 Copyright © 2020 weird lab</p></div></footer><script src="/js/nav.js"></script><script src="/js/scroll.js"></script><script src="/js/index.js"></script></body></html>